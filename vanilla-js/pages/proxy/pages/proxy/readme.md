# Proxy
> ะะฑัะตะบั ะพะฑะตััะบะฐ, ะฟะพะทะฒะพะปัััะฐั ะฟะตัะตัะฒะฐััะฒะฐัั ัะฐะทะปะธัะฝัะต ะพะฟะตัะฐัะธะธ ะฝะฐะด ะพะฑะตัะฝัััะผ ะพะฑัะตะบัะพะผ

```javascript
let proxy = new Proxy(target, handler);
```

๐น `target` - ะพะฑัะตะบั ะดะปั ะบะพัะพัะพะณะพ ะฑัะดะตั ัะดะตะปะฐะฝะพ ะฟัะพะบัะธ

๐น `handler` - ะพะฑัะตะบั ั ะปะพะฒััะบะฐะผะธ ะฝะฐ ัะฐะทะปะธัะฝัะต ะพะฟะตัะฐัะธะธ  
&emsp;&emsp; ๐ ะะฐะฟัะธะผะตั `get/set`

๐น ะัะพะบัะธัะพะฒะฐัั ะผะพะถะฝะพ ะปัะฑะพะน ะพะฑัะตะบั, ะฒะบะปััะฐั ะผะฐััะธะฒั, ะบะปะฐััั ะธ ััะฝะบัะธะธ

๐น ะัะพะบัะธ ะธ ะพะฑัะตะบั, ะบะพัะพััะน ะฟัะพะบัะธััะตััั, ัะฒะปััััั ะดะฒัะผั ัะฐะทะฝัะผะธ ะพะฑัะตะบัะฐะผะธ  
&emsp;&emsp; ๐ ะะพ ะฟัะธ ะธะทะผะตะฝะตะฝะธัั ะฟัะพะบัะธ ะปะธะฑะพ ะพัะธะณะธะฝะฐะปัะฝะพะณะพ ะพะฑัะตะบัะฐ, ะธะทะผะตะฝะตะฝะธะต ะฟัะพะธะทะพะนะดะตั ะฒ ะพะฑะพะธั

๐น ะะพะฒััะบะธ ััะฐะฑะพัะฐัั ัะพะปัะบะพ ะฟัะธ ะฒัะฟะพะปะฝะตะฝะธะธ ะพะฟะตัะฐัะธะน ัะตัะตะท ะฟัะพะบัะธ ะพะฑัะตะบั

๐น ะะตะท ะปะพะฒััะตะบ `proxy` ัะฒะปัะตััั ะฟัะพะทัะฐัะฝะพะน ะพะฑัััะบะพะน ะฟัะพััะพ ะฟะตัะตะฝะฐะฟัะฐะฒะปัััะธะน ะฒัะต ะพะฟะตัะฐัะธะธ ะฝะฐ `target`

๐น ะะธะบัะพ ะฝะต ะดะพะปะถะตะฝ ัััะปะฐัััั ะฝะฐ ะพัะธะณะธะฝะฐะปัะฝัะน ะพะฑัะตะบั ะฟะพัะปะต ัะพะณะพ, ะบะฐะบ ะพะฝ ะฑัะป ะฟัะพะบัะธัะพะฒะฐะฝ `(ะะฝะฐัะต ะพัะตะฝั ะปะตะณะบะพ ะทะฐะฟััะฐัััั)`    
&emsp;&emsp; ๐ ะะปั ััะพะณะพ ััะพะธั ะฟะตัะตะทะฐะฟะธัะฐัั ะฟะตัะตะผะตะฝะฝัั ะพัะธะณะธะฝะฐะปัะฝะพะณะพ ะพะฑัะตะบัะฐ, ะพะฑัะตะบัะพะผ ะฟัะพะบัะธ

```javascript
let numbers = [0, 1, 2];

numbers = new Proxy(numbers, {})
```

๐น `proxy` ะผะพะถะตั ะฟะตัะตัะฒะฐััะฒะฐัั ะธ ะธะทะผะตะฝััั ัะฐะฑะพัั ัะฐะบ ะฝะฐะทัะฒะฐะตะผัั "ะฒะฝัััะตะฝะฝะธั ะผะตัะพะดะพะฒ"  
&emsp;&emsp; ๐ ะะปั ะบะฐะถะดะพะณะพ ะฒะฝัััะตะฝะฝะตะณะพ ะผะตัะพะดะฐ ะตััั ัะฒะพะต ะฝะฐะทะฒะฐะฝะธะต ะปะพะฒััะบะธ

<p align="center" style="text-align:center">
      <img src="./img/illustration.png" alt="illustration" width="500"/>
</p>

<br>

๐ **ะะพะฒััะบะฐ `get(target, property, receiver)`**   
๐๐ฝ ะะพะทะฒะพะปัะตั ัะฐััะธัะธัั ััะฝะบัะธะพะฝะฐะป ะฟะพะปััะตะฝะธั ัะฒะพะนััะฒ  

&emsp;&emsp; ๐น ะะพะฑะฐะฒะธัั ะทะฝะฐัะตะฝะธะต ะฟะพ ัะผะพะปัะฐะฝะธั

&emsp;&emsp; ๐น ะะฐะบัััั ะดะพัััะฟ ะดะปั ััะตะฝะธั ัะบััััั ัะฒะพะนััะฒ

&emsp;&emsp; ๐ฏ `target` - ะัะธะณะธะฝะฐะปัะฝัะน ะพะฑัะตะบั

&emsp;&emsp; ๐ฏ `property` - ะะผั ัะธัะฐะตะผะพะณะพ ัะฒะพะนััะฒะฐ

&emsp;&emsp; ๐ฏ `receiver` - ะะพะฝัะตะบัั

```javascript
let dictionary = {
    'Hello': 'Hola',
    'Bye': 'Adiรณs'
};

dictionary = new Proxy(dictionary, {
    get(target, phrase) {           // ะฟะตัะตัะฒะฐััะฒะฐะตะผ ััะตะฝะธะต ัะฒะพะนััะฒะฐ ะฒ dictionary
        if (phrase in target) {     // ะตัะปะธ ะฟะตัะตะฒะพะด ะดะปั ััะฐะทั ะตััั ะฒ ัะปะพะฒะฐัะต
            return target[phrase];  // ะฒะพะทะฒัะฐัะฐะตะผ ะตะณะพ
        } else {
                                    // ะธะฝะฐัะต ะฒะพะทะฒัะฐัะฐะตะผ ะฝะตะฟะตัะตะฒะตะดัะฝะฝัั ััะฐะทั
            return phrase;
        }
    }
});

console.log(dictionary['Hello']);            // ๐๐ผ Hola
console.log(dictionary['Welcome to Proxy']); // ๐๐ผ Welcome to Proxy (ะฝะตั ะฟะตัะตะฒะพะดะฐ)
```

<br><br>

๐ **ะะพะฒััะบะฐ `set(target, property, value, receiver)`**   
๐๐ฝ ะะพะทะฒะพะปัะตั ะบะพะฝััะพะปะธัะพะฒะฐัั ะฒะฒะพะดะธะผัะต ะทะฝะฐัะตะฝะธั

&emsp;&emsp; ๐น ะะฐะปะธะดะธัะพะฒะฐัั

&emsp;&emsp; ๐น ะะพะดะธัะธัะธัะพะฒะฐัั ะฝะฐ ะปะตัั

&emsp;&emsp; ๐น ะะปะพะบะธัะพะฒะฐัั ะทะฐะฟะธัั ะธะปะธ ะธะทะผะตะฝะตะฝะธะต ัะฒะพะนััะฒ

&emsp;&emsp; ๐ ะะพะฒััะบะฐ `set`, ะดะพะปะถะฝะฐ ะฒะพะทะฒัะฐัะฐัั `true`, ะดะปั ััะฟะตัะฝะพะน ะทะฐะฟะธัะธ

&emsp;&emsp; ๐ ะัะปะธ ะปะพะฒััะบะฐ `set` ะฒะตัะฝัะปะฐ `false`, ะฑัะดะตั ะฒัะฑัะพัะตะฝะฝะฐ ะพัะธะฑะบะฐ    
&emsp;&emsp; ๐ ะตัะปะธ ะพัะธะฑะบั ะฝะต ะพะฑะตัะฝััั ะฒ `try/catch`, ะพะฝะฐ ะฟะพะปะพะถะตั ะฒะตัั ัะบัะธะฟั

&emsp;&emsp; ๐ฏ `target` - ะัะธะณะธะฝะฐะปัะฝัะน ะพะฑัะตะบั  
&emsp;&emsp; ๐ฏ `property` - ะะผั ัะธัะฐะตะผะพะณะพ ัะฒะพะนััะฒะฐ  
&emsp;&emsp; ๐ฏ `value` โ ะทะฝะฐัะตะฝะธะต ัะฒะพะนััะฒะฐ  
&emsp;&emsp; ๐ฏ `receiver` - ะะพะฝัะตะบัั

<br><br>

๐ **ะะพะฒััะบะฐ `set(target, property, value, receiver)`**   
๐๐ฝ ะะพะทะฒะพะปัะตั ะบะพะฝััะพะปะธัะพะฒะฐัั ะฒะฒะพะดะธะผัะต ะทะฝะฐัะตะฝะธั

```javascript
let numbers = [];

numbers = new Proxy(numbers, { // (*)
    set(target, prop, val) { // ะดะปั ะฟะตัะตัะฒะฐัะฐ ะทะฐะฟะธัะธ ัะฒะพะนััะฒะฐ
        if (typeof val == 'number') {
            target[prop] = val;
            return true;
        } else {
            return false;
        }
    }
});

numbers.push(1);
numbers.push(2);
console.log(numbers) // [1, 2]

numbers.push("ัะตัั"); // TypeError (ะปะพะฒััะบะฐ set ะฝะฐ ะฟัะพะบัะธ ะฒะตัะฝัะปะฐ false)
```

<br><br>

๐ **ะะพะฒััะบะฐ `ownKeys(target)`**   
๐๐ฝ ะะพะทะฒะพะปัะตั ะบะพะฝััะพะปะธัะพะฒะฐัั ัะฐะฑะพัั ั ัะฟะธัะบะพะผ ัะฒะพะนััะฒ ะพะฑัะตะบัะฐ

&emsp;&emsp; ๐น ะัะบะปััะฐัั ะบะปััะธ ะธะท ัะธะบะปะพะฒ

&emsp;&emsp; ๐ ะะพะฒััะบะฐ `ownKeys`, ะดะพะปะถะฝะฐ ะฒะพะทะฒัะฐัะฐัั ะผะฐััะธะฒ ะบะปััะตะน, ะบะพัะพััะต ะฑัะดัั ะดะพัััะฟะฝั ะดะปั ะฟะตัะตะฑะพัะฐ

&emsp;&emsp; ๐ฏ `target` - ะัะธะณะธะฝะฐะปัะฝัะน ะพะฑัะตะบั

```javascript
let user = {
    name: "Alex",
    age: 25,
    _password: "***"
};

user = new Proxy(user, {
    ownKeys(target) {
        return Object.keys(target).filter(key => !key.startsWith('_'));
    }
});

for(let key in user) console.log(key); // ๐๐ผ name, age

console.log( Object.keys(user) );      // ๐๐ผ name, age
console.log( Object.values(user) );    // ๐๐ผ ะะฐัั, 30
console.log( Object.entries(user) );   // ๐๐ผ [ [ 'name', 'Alex' ], [ 'age', 25 ] ]
```

<br><br>

๐ **ะะพะฒััะบะฐ `getOwnPropertyDescriptor(target, prop)`**   
๐๐ฝ ะะพะทะฒะพะปัะตั ะฟะตัะตัะฒะฐััะฒะฐัั ะผะพะผะตะฝั ะฟัะพะฒะตัะบะธ ะดะตัะบัะธะฟัะพัะพะฒ

&emsp;&emsp; ๐ฏ `target` - ะัะธะณะธะฝะฐะปัะฝัะน ะพะฑัะตะบั  
&emsp;&emsp; ๐ฏ `prop` - ะัะพะฒะตััะตะผะพะต ัะฒะพะนััะฒะพ

๐ ะะฝะพะณะธะต ะธัะตัะธััะตะผัะต ะผะตัะพะดั(`ะฝะฐะฟัะธะผะตั Object.keys`) ะฒะพะทะฒัะฐัะฐัั ัะพะปัะบะพ ัะฒะพะนััะฒะฐ ั ะดะตัะบัะธะฟัะพัะพะผ `enumerable: true`

&emsp;&emsp; ๐น ะะปั ะพะฟัะตะดะตะปะตะฝะธั ะดะตัะบัะธะฟัะพัะฐ, ั ะบะฐะถะดะพะณะพ ัะฒะพะนััะฒะฐ ะฒัะทัะฒะฐะตัััั ะฒะฝัััะตะฝะฝะธะน ะผะตัะพะด `[[GetOwnProperty]]`  
&emsp;&emsp; ๐น ะปะพะฒััะบะฐ `getOwnPropertyDescriptor` ะฟะพะทะฒะพะปัะตั ะฟะตัะตัะฒะฐัะธัั ะพะฑัะฐัะตะฝะธะต ะบ ััะพะผั ะผะตัะพะดั, ะธ ะฒะตัะฝััั ะฝัะถะฝัะต ะดะตัะบัะธะฟัะพัั

```javascript
let user = { };

user = new Proxy(user, {
    ownKeys(target) {                        // ๐๐ผ ะฒัะทัะฒะฐะตััั 1 ัะฐะท ะดะปั ะฟะพะปััะตะฝะธั ัะฟะธัะบะฐ ัะฒะพะนััะฒ
        return ['a', 'b', 'c'];
    },
    getOwnPropertyDescriptor(target, prop) { // ๐๐ผ ะฒัะทัะฒะฐะตััั ะดะปั ะบะฐะถะดะพะณะพ ัะฒะพะนััะฒะฐ
        return {
            enumerable: true,
            configurable: true
        };
    }

});

console.log( Object.keys(user) ); // ๐๐ผ a, b, c
```

<br><br>

๐ **ะะพะฒััะบะฐ `deleteProperty(target, prop)`**   
๐๐ฝ ะะพะทะฒะพะปัะตั ะฟะตัะตัะฒะฐััะฒะฐัั ัะดะฐะปะตะฝะธะต ัะฒะพะนััะฒะฐ

&emsp;&emsp; ๐ฏ `target` - ะัะธะณะธะฝะฐะปัะฝัะน ะพะฑัะตะบั  
&emsp;&emsp; ๐ฏ `prop` - ะฃะดะฐะปัะตะผะพะต ัะฒะพะนััะฒะพ

```javascript
let user = {
  name: "ะะฐัั",
  _password: "***"
};

user = new Proxy(user, {
    deleteProperty(target, prop) {
        if (prop.startsWith('_')) {
            throw new Error("ะัะบะฐะทะฐะฝะพ ะฒ ะดะพัััะฟะต");
        }
        
        delete target[prop];
        return true;
    }
});

try {
    delete user._password;
} catch(e) { 
    console.log(e.message); // ๐๐ผ Error: ะัะบะฐะทะฐะฝะพ ะฒ ะดะพัััะฟะต
}
```

<br><br>

๐ **ะะพะฒััะบะฐ `has(target, prop)`**   
๐๐ฝ ะะพะทะฒะพะปัะตั ะฟะตัะตัะฒะฐััะฒะฐัั ะฟัะพะฒะตัะบั ัะฒะพะนััะฒะฐ ะฒ ะพะฑัะตะบัะต

&emsp;&emsp; ๐ฏ `target` - ะัะธะณะธะฝะฐะปัะฝัะน ะพะฑัะตะบั  
&emsp;&emsp; ๐ฏ `prop` - ะัะพะฒะตััะตะผะพะต ัะฒะพะนััะฒะพ


```javascript
let user = { name: undefined, age: null};

user = new Proxy(user, {
    has(target, prop) {
        if (prop in target && typeof target[prop] !== 'undefined') {
            return true
        }

        return false
    }
});

console.log( 'name' in user ); // ๐๐ผ false
console.log( 'age' in user );  // ๐๐ผ true
```

<br><br>

๐ **ะะพะฒััะบะฐ `apply(target, thisArg, args)`**   
๐๐ฝ ะะพะทะฒะพะปัะตั ะฟะตัะตัะฒะฐััะฒะฐัั ะฒัะทะพะฒ ััะฝะบัะธะธ

&emsp;&emsp; ๐ฏ `target` - ะัะธะณะธะฝะฐะปัะฝัะน ะพะฑัะตะบั (`ะฒ ะดะฐะฝะฝะพะผ ัะปััะฐะธ ะพัะธะณะธะฝะฐะปัะฝะฐั ััะฝะบัะธั`)    
&emsp;&emsp; ๐ฏ `thisArg` - ะะพะฝัะตะบัั ััะฝะบัะธะธ  
&emsp;&emsp; ๐ฏ `args` - ะัะณัะผะตะฝัั ััะฝะบัะธะธ  

๐ ะ ะพัะปะธัะธะธ ะพั ะพะฑััะฝะพะน ะพะฑะตััะบะธ, `Proxy` ะฟะตัะตะฝะฐะฟัะฐะฒะปัะตั ััะตะฝะธั ัะฒะพะนััะฒ `name` ะธ `length` ะฝะฐ ะพัะธะณะธะฝะฐะปัะฝัั ััะฝะบัะธั, ะบะพัะพััั ะพะฑะพัะฐัะธะฒะฐัั  

```javascript
function delay(f, ms) {
    return new Proxy(f, {
        apply(target, thisArg, args) {
            setTimeout(() => target.apply(thisArg, args), ms);
        }
    });
}

function sayHi(user) {
    console.log(`ะัะธะฒะตั, ${user}!`);
}

sayHi = delay(sayHi, 3000);

console.log(sayHi.length); // ๐๐ผ ะฟัะพะบัะธ ะฟะตัะตะฝะฐะฟัะฐะฒะปัะตั ััะตะฝะธะต ัะฒะพะนััะฒะฐ length ะฝะฐ ะธััะพะดะฝัั ััะฝะบัะธั
```

<br>

## ะัะบะปััะฐะตะผัะน ะฟัะพะบัะธ  
๐ ะัะพะบัะธ, ะบะพัะพััะน ะผะพะถะตั ะฑััั ะพัะบะปััะตะฝ ะฒัะทะพะฒะพะผ ัะฟะตัะธะฐะปัะฝะพะน ััะฝะบัะธะธ

```javascript
let object = {
    data: "ะะฐะถะฝัะต ะดะฐะฝะฝัะต"
};

let {proxy, revoke} = Proxy.revocable(object, {
    get(target, prop) {
        const value = target[prop]
        return typeof value === 'string' ? value.toUpperCase() : value
    }
});

console.log(proxy.data) // ๐๐ผ 'ะะะะะซะ ะะะะะซะ'

revoke()                // ะัะบะปััะธั ะฟัะพะบัะธ

console.log(object.data) // ๐๐ผ 'ะะฐะถะฝัะต ะดะฐะฝะฝัะต' ๐ ะะพัััะฟ ะบ ะพัะธะณะธะฝะฐะปัะฝะพะผั ะพะฑัะตะบัั ะพััะฐะตัััั 
console.log(proxy.data)  // ๐๐ผ TypeError: Cannot perform 'get' on a proxy that has been revoked
```

<br><br>

### โต **<a href="../../readme.md">ะะฐะทะฐะด</a>**  

[comment]: <> (โ๐ผ ะัะธะฒะฐัะฝัะต ะฟะพะปั, Map, Set, constuct)