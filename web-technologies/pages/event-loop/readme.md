<a href="http://latentflip.com/loupe/?code=JC5vbignYnV0dG9uJywgJ2NsaWNrJywgZnVuY3Rpb24gb25DbGljaygpIHsKICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gdGltZXIoKSB7CiAgICAgICAgY29uc29sZS5sb2coJ1lvdSBjbGlja2VkIHRoZSBidXR0b24hJyk7ICAgIAogICAgfSwgMjAwMCk7Cn0pOwoKY29uc29sZS5sb2coIkhpISIpOwoKc2V0VGltZW91dChmdW5jdGlvbiB0aW1lb3V0KCkgewogICAgY29uc29sZS5sb2coIkNsaWNrIHRoZSBidXR0b24hIik7Cn0sIDUwMDApOwoKY29uc29sZS5sb2coIldlbGNvbWUgdG8gbG91cGUuIik7!!!PGJ1dHRvbj5DbGljayBtZSE8L2J1dHRvbj4%3D">
  <p align="center" style="text-align:center">
      <img src="./img/illustration.png" alt="illustration" width="500"/>
  </p>
</a>

https://www.youtube.com/watch?v=SUkauGm52Qs&ab_channel=PlatinumDEV

* Макро задачи - таймаут
* Микро задачи - промис, try/catch, Promis job, быстрее выполнится промис

# Event loop

JavaScript - однопоточный язык программирования, это значит что в текущий момент времени, мы можем выполнять только одну задачу.

И если в кода попалась строка где происходит какая-то сложная задача, код за ней не выполнится, пока сложная задача не будет выполнена

Зная событийный цикл, можно построить код так, что бы ресурсоемкие задачи, не блокировали поток, и интерфейс пользователя


#### В EventLoop есть следующие понятия

* **Стек** - это очередь синхронных задач, куда попадает синхронная строка кода, и начинает выполнятся по логике, последний вошел, первый вышел.

1.Т.е задача попадает наверх стека, сразу же выполняется, и выходит из стека

2.Если в стек попала функция, она не выйдет из стека, пока не выполнится весь код внутри нее.  

3.В таком случаи функция будет лежать снизу стека, а синхронные задачи внутри нее, будут попадать наверх стека и выполнятся

<br>

___

<br>

* **WebApi** - Это любые слушатели либо таймауты

1.Если во время выполнения кода, интерпретатору встретится слушатель или таймаут, он закинет его в стек, зарегистрирует процесс в webApi, и не выполняя процесс выбросит его из стека

2.Если это слушатель, то когда сработает событие, оно попадет в очередь задач

3.Если это таймаут, то вызов функции тоже попадет в очередь задач

<br>

___

<br>

* **Очередь задач** - это список, куда попадают задачи, которые срабатывают в WebApi из тайм-аутов или событий, по логике первый вошел, первый вышел

1.Задачи из очереди выполняются, только в тот момент когда список синхронных задач закончился и стек пустой. Event Loop берет первую задачу которая была в очереди, и закидывает ее в стек для выполнения


___

#### Задачка на понимание event Loop

Какой будет порядок вывода?

```javascript
console.log('first');

setTimeout(() => {
   console.log('inside timeout')
}, 0)

console.log('second')
```

**Ответ:**

1. first
2. second
3. inside timeout

Хоть **inside timeout** написан первым и таймаут стоит 0,   
Он все равно попадает в webApi, потом в очередь, и отработает только после того  
Как синхронный код будет выполнен